<!DOCTYPE html>
<html ng-app="diceApp">
<head>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular.min.js"></script>
    <script
        src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script>
    <script
        src="https://cdn.rawgit.com/gdi2290/angular-websocket/v1.0.9/angular-websocket.min.js"></script>
    <script src="/js/controllers/dice.js"></script>
    <title><%= title %></title>
    <link rel='stylesheet' href='/stylesheets/style.css'/>
</head>
<body>
<div class="player_name" ng-controller="NameController as nameController">
    <input type="text"
           ng-model="playerName"
           placeholder="Enter your name"
           name="playerName"/>
</div>
<div class="dice" ng-controller="DiceSelectionController as diceSelection">
    <div class="roll">
        <input type="button" name="roll" value="Roll"
               ng-click="diceSelection.roll()"
               ng-disabled="diceSelection.nameIsUnavailable()"
        />
    </div>
    <div ng-repeat="dieType in diceSelection.types">
            <img ng-repeat="i in diceSelection.selectedDice(dieType)"
                 ng-src="/images/dice/{{dieType}}.png"
                 ng-click="diceSelection.selectDice(dieType, i)"
            />
            <img ng-repeat="i in diceSelection.unselectedDice(dieType)"
                 ng-src="/images/dice/{{dieType}}.png"
                 ng-click="diceSelection.selectDice(dieType, i)"
                 class="unselected"
            />
    </div>
    <input type="button" name="reset" value="Reset all dice"
           ng-click="diceSelection.resetAll()"/>
</div>
<div class="history" ng-controller="HistoryController as history">
    <div class="last-throw"></div>
    <div class="previous-throws">
        <div class="old-throw"
             ng-repeat="throwResult in history.throwResults track by $index">
            <div class="player-name">{{throwResult.playerName}}</div>
            <div class="die-side" ng-repeat="dieResult in throwResult.rolls">
                <img class="die-background"
                     ng-src="images/dice_backgrounds/{{dieResult.dieName}}.png"/>
                <div class="die-result-wrap die-result-wrap-{{dieResult.dieName}}">
                <img class="die-result" ng-repeat="result in dieResult.result"
                     ng-src="images/results/{{result.basename}}.png"/>
                </div>
            </div>
        </div>
    </div>
</div>

</body>
</html>
